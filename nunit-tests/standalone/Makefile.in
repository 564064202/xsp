MCS=@MCS@
MCSFLAGS+= -debug+ -debug:full -nologo \
	   -lib:@top_srcdir@/tools/nunitasp/source/NUnitAsp

MKINSTALLDIRS=@top_srcdir@/mkinstalldirs 
DISTFILES=Makefile.in $(ASPNET_FILES) $(CS_FILES)

ASPNET_FILES = \
	test1.aspx \
	test2.aspx \
	test3.aspx

CS_FILES = test1.cs

# 
REFERENCES= System.Web NUnit.Framework NUnitAsp
REFS= $(addsuffix .dll, $(addprefix -r:, $(REFERENCES)))

DLLNAME = standalone-tests.dll

.PHONY: all install clean uninstall trace

all: $(DLLNAME)

install: $(DLLNAME)

$(DLLNAME): $(CS_FILES)
	$(MCS) $(MCSFLAGS) $(REFS) -target:library -out:$@ $^

clean:
	rm -f $(DLLNAME) *~ *.pdb

uninstall:

distdir:
	$(MKINSTALLDIRS) $(distdir)
	cp $(DISTFILES) $(distdir)

reautogen:
	(cd ../.. && ./config.status nunit-tests/standalone/Makefile)

distclean: clean
	rm -f Makefile

